function getGreenToRed(t){return g=50>t?255:Math.floor(255-255*(2*t-100)/100),r=t>50?255:Math.floor(2*t*255/100),"rgb("+r+","+g+",0)"}var render_bar_charts=function(){$(".chart").each(function(t,e){var r=$(e),o=[parseInt(r.data("dataHours"))],n=[parseInt(r.data("dataHoursUsed"))],a=parseFloat(r.data("bar-width"))||15,c=parseFloat(r.data("bar-space"))||.5,i=r.outerHeight(),s=d3.scale.linear().domain([0,o]).range([0,150]);d3.scale.linear().domain([0,i]).range([0,o]);d3.select(e).append("g").selectAll(".bar-hours").data(o).enter().append("rect").attr("class","bar-hours").attr("width",a).attr("x",function(t,e){return a*e+c*e}).attr("y",i).attr("height",i).attr("y",0),d3.select(e).selectAll("g").selectAll(".bar-used").data(n).enter().append("rect").attr("class","bar-used").attr("width",a).attr("x",function(t,e){return a*e+c*e}).attr("y",i).attr("height",0).transition().delay(function(t,e){return 100*e}).attr("y",function(t,e){return i-s(t)}).attr("height",function(t){return s(t)}).attr("fill",function(t,e){return getGreenToRed(t/o[e]*100)})})};!function(t,e,r){"use strict";var o=e.module("pressurizeApp",["ngRoute"]).service("sharedProperties",function(){var t=null!==localStorage.getItem("projects")?JSON.parse(localStorage.getItem("projects")):[];return{getProjects:function(){return t},setProjects:function(e){t.push(e);var r=JSON.stringify(t,function(t,e){return"$$hashKey"==t?void 0:e});localStorage.setItem("projects",r)}}});o.config(["$routeProvider",function(t){t.when("/projects/",{templateUrl:"partials/projects-list.html",controller:"ProjectsListController"}).when("/projects/create/",{templateUrl:"partials/projects-create.html",controller:"ProjectCreateController"}).otherwise({redirectTo:"/projects/"})}]),o.controller("ProjectsListController",["$scope","$http","sharedProperties",function(e,r,o){e.projects=o.getProjects(),e.init=function(){var e=setInterval(function(){if(t(".chart").length>0){render_bar_charts();var r=new RowEditor(t(".grid-rows"));r.init(),r.onSubmit(function(t){o.setProjects({})}),clearInterval(e)}},10)}}]),o.controller("ProjectCreateController",["$scope","$http","sharedProperties",function(t,e,o){t.project=[],t.submitForm=function(e){e||alert("please fill out all fields correctly"),o.setProjects({name:t.project.name,description:t.project.description,dev_hours:t.project.dev_hours,total_used:t.project.total_used}),alert("project created!"),r.location="/#/projects"}}])}(jQuery,angular,window),RowEditor=function(t){var e=function(t){this.$object=t};return e.prototype.init=function(){this.template=this.getTemplate(function(t){this.addRows(1,t);var e=this.$object.find(".row-editor");this.addEvents(e)}.bind(this))},e.prototype.addRows=function(t,e){for(var r=0;t>r;r++)this.$object.append(e)},e.prototype.onSubmit=function(t,e){t.on("submit",function(t){t.preventDefault(),e(t)})},e.prototype.getTemplate=function(e){return function(){t.get("/partials/projects-row-editor.html").done(function(t){e(t)})}()},e}(jQuery);